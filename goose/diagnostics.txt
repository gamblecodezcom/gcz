=== GCZ STACK DIAGNOSTICS ===
Re-indexed: 2026-01-01 05:05:08

--- PROJECT STATISTICS ---
Total Source Files: 244 (excluding node_modules, .git, dist, broken frontend)
  - JavaScript/TypeScript: 244 files
  - SQL files: 14 files
  - HTML files: 20+ admin pages
  - React Components: 30+ components
  - API Routes: 45 route files
  - Middleware: 7 files
  - Services: 3 files
  - Bot Commands: 9 handlers
  - Bot Services: 10 services

--- ARCHITECTURE ---
Backend: Node.js + Express.js 5.x
Frontend: React 19 + TypeScript + Vite
Database: PostgreSQL (Neon.tech)
Real-time: Socket.io
Bots: Telegram (Telegraf) + Discord (discord.js)
Process Manager: PM2 (5 processes)
Web Server: Nginx (reverse proxy + SSL)

--- PM2 PROCESSES ---
Expected processes:
  - gcz-api (server.js) - Main API server
  - gcz-bot (start-bot.js) - Telegram bot
  - gcz-discord (start-discord.js) - Discord bot
  - gcz-redirect (backend/redirect.py) - Python redirect service
  - gcz-watchdog (watchdog.js) - Health monitoring

--- KEY FEATURES INDEXED ---
✅ Daily Wheel Spin System
✅ Raffle Engine (timed, manual, daily)
✅ Giveaway System (multiple types)
✅ Drops Ecosystem (AI-powered)
✅ Gamification (XP, levels, achievements)
✅ Affiliate System (analytics, tracking)
✅ Ad System (weighted random)
✅ Real-time Features (WebSocket)
✅ Security (headers, rate limiting, PIN auth)
✅ Bot Integrations (Telegram, Discord)

--- DATABASE SCHEMA ---
30+ tables including:
  - Core: users, settings, admin_audit_log
  - Raffles: raffles, raffle_entries, raffle_winners
  - Wheel: wheel_config, wheel_prize_slots, spin_logs
  - Affiliates: affiliates_master, daily_drops
  - Promos: promos, promo_decisions
  - Ads: ads, ad_campaigns, ad_impressions, ad_clicks
  - Newsletter: newsletter_campaigns, newsletter_subscribers
  - Giveaways: giveaways, giveaway_entries, giveaway_winners
  - Analytics: affiliate_clicks, affiliate_conversions
  - Drops: raw_drops, promo_candidates, drop_promos

--- API ENDPOINTS ---
Public Endpoints: 20+ endpoints
Admin Endpoints: 30+ endpoints
Total Routes: 45 route files

--- BUILD STATUS ---
✅ TypeScript: Zero errors
✅ ESLint: Zero errors
✅ Vite Build: Success
✅ Tests: Jest + React Testing Library
✅ Production: Ready

--- DEPLOYMENT ---
Nginx: Serves frontend from /frontend/dist
Backend: Proxied via /api/* to port 3000
WebSocket: /socket.io/ for real-time
SSL: Let's Encrypt certificates
Health: /api/health endpoint

--- FILE STRUCTURE ---
/var/www/html/gcz/
├── server.js (main entry)
├── routes/ (45 route files)
├── middleware/ (7 files)
├── services/ (3 files)
├── bot/ (Telegram bot system)
├── discord/ (Discord bot system)
├── frontend/ (React + TypeScript SPA)
├── admin/ (HTML admin panel)
├── sql/ (database schema + migrations)
├── utils/ (shared utilities)
├── controllers/ (business logic)
├── models/ (data models)
├── jobs/ (background jobs)
└── goose/ (project index + diagnostics)

--- DOCUMENTATION ---
27 markdown documentation files including:
  - README.md
  - BACKEND_API_SUMMARY.md
  - IMPLEMENTATION_COMPLETE_SUMMARY.md
  - GAMBLECODEZ_DROPS_IMPLEMENTATION_SUMMARY.md
  - And 23+ more implementation reports

--- LAST UPDATED ---
2026-01-01 05:05:08 UTC
Full re-index completed successfully
